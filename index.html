<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Pastel - Food Truck</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #f0f9f4 0%, #e8f5e9 100%); color: #2d2d2d; min-height: 100vh; }
    /* Landing como referÃªncia */
    .landing { max-width: 600px; margin: 0 auto; padding: 0 1rem 2rem; }
    .landing .header-landing {
      background: linear-gradient(135deg, #0d7541 0%, #27ae60 100%);
      padding: 16px 20px;
      box-shadow: 0 4px 12px rgba(13,117,65,0.2);
      position: sticky; top: 0; z-index: 100;
      margin: 0 -1rem 24px; padding-left: 1rem; padding-right: 1rem;
    }
    .landing .header-content { display: flex; align-items: center; max-width: 600px; margin: 0 auto; }
    .landing .header-content .header-spacer { flex: 1; }
    .landing .header-content .logo-wrap { flex: 1; text-align: center; }
    .landing .logo { font-size: 24px; font-weight: 800; color: white; display: inline-block; }
    .landing .header-content .btn-idioma-wrap { flex: 1; text-align: right; }
    .landing .btn-idioma {
      background: rgba(255,255,255,0.2); border: 2px solid rgba(255,255,255,0.5);
      color: white; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 600;
      cursor: pointer; transition: all 0.3s;
    }
    .landing .btn-idioma:hover { background: rgba(255,255,255,0.3); }
    .landing .hero-image {
      width: 100%; height: 280px; border-radius: 20px; overflow: hidden; margin-bottom: 24px;
      position: relative; box-shadow: 0 8px 24px rgba(13,117,65,0.2);
    }
    .landing .hero-image img { width: 100%; height: 100%; object-fit: cover; }
    .landing .hero-overlay {
      position: absolute; bottom: 0; left: 0; right: 0;
      background: linear-gradient(to top, rgba(13,117,65,0.95) 0%, transparent 100%);
      padding: 20px; color: white;
    }
    .landing .hero-title { font-size: 28px; font-weight: 900; }
    .landing .hero-subtitle { font-size: 14px; font-weight: 600; }
    .landing .btn-principal {
      width: 100%; background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      color: white; border: none; padding: 24px; border-radius: 20px;
      font-size: 22px; font-weight: 900; cursor: pointer;
      box-shadow: 0 8px 20px rgba(46,204,113,0.4); transition: all 0.3s; margin-bottom: 24px;
    }
    .landing .btn-principal:hover { transform: scale(1.02); }
    .landing .botoes-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
    .landing .btn-secundario {
      background: white; border: 3px solid #a8e6cf; padding: 20px 16px; border-radius: 16px;
      font-size: 14px; font-weight: 700; color: #0d7541; cursor: pointer; transition: all 0.3s;
      text-align: center; text-decoration: none; display: flex; flex-direction: column; align-items: center; gap: 8px;
      box-shadow: 0 4px 12px rgba(13,117,65,0.1);
    }
    .landing .btn-secundario:hover { border-color: #2ecc71; transform: translateY(-2px); }
    .landing .btn-icone { font-size: 28px; }
    .landing .footer-info {
      background: white; border-radius: 16px; padding: 20px; text-align: center;
      box-shadow: 0 2px 8px rgba(13,117,65,0.1); border: 2px solid #a8e6cf;
    }
    .landing .footer-texto { color: #666; font-size: 14px; line-height: 1.6; }
    .landing .footer-destaque { color: #0d7541; font-weight: 700; }
  </style>
</head>
<body>
  <div id="app">
    <!-- Landing (como referÃªncia) -->
    <div id="landing" class="landing">
      <div class="header-landing">
        <div class="header-content">
          <div class="header-spacer"></div>
          <div class="logo-wrap"><span class="logo" id="logo">ğŸ¥Ÿ PASTEL</span></div>
          <div class="btn-idioma-wrap" style="display:flex;align-items:center;gap:8px;">
            <a href="cardapio-carrinho.html" id="btnCarrinho" style="display:none;background:rgba(255,255,255,0.2);border:2px solid rgba(255,255,255,0.5);color:white;padding:8px 12px;border-radius:20px;font-size:13px;font-weight:600;text-decoration:none;">ğŸ›’ <span id="cart-count">0</span></a>
            <button type="button" class="btn-idioma" id="btnIdioma">ğŸ‡§ğŸ‡· PT</button>
          </div>
        </div>
      </div>
      <div class="hero-image">
        <img src="img/pastel-carne.png" alt="Pastel" id="heroImg">
        <div class="hero-overlay">
          <div class="hero-title" id="heroTitle">ãƒ‘ã‚¹ãƒ†ãƒ«</div>
          <div class="hero-subtitle" id="heroSubtitle">ãƒ–ãƒ©ã‚¸ãƒ«ã®ä¼çµ±æ–™ç†</div>
        </div>
      </div>
      <button type="button" class="btn-principal" id="btnPrincipal">ğŸ›’ æ³¨æ–‡ã™ã‚‹</button>
      <div class="botoes-grid">
        <a href="liff-o-que-e-pastel.html" class="btn-secundario">
          <span class="btn-icone">ğŸ¥Ÿ</span>
          <span id="btn1">ãƒ‘ã‚¹ãƒ†ãƒ«ã¨ã¯ï¼Ÿ</span>
        </a>
        <a href="cardapio-promocoes.html" class="btn-secundario">
          <span class="btn-icone">ğŸ</span>
          <span id="btn2">ãŠå¾—ãªã‚»ãƒƒãƒˆ</span>
        </a>
        <a href="liff-galeria.html" class="btn-secundario">
          <span class="btn-icone">ğŸ“¸</span>
          <span id="btn3">å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</span>
        </a>
        <a href="liff-faq.html" class="btn-secundario">
          <span class="btn-icone">â“</span>
          <span id="btn4">ã‚ˆãã‚ã‚‹è³ªå•</span>
        </a>
      </div>
      <div class="footer-info">
        <div class="footer-texto" id="footerTexto">
          ã”æ³¨æ–‡å¾Œã€LINEã§é€šçŸ¥ãŒå±Šãã¾ã™ï¼<br>
          <span class="footer-destaque" id="footerDestaque">å‡ºæ¥ç«‹ã¦ã‚’ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ ğŸ”¥</span>
        </div>
      </div>
    </div>

    <div id="loading" style="display:none;">èª­ã¿è¾¼ã¿ä¸­...</div>
    <div id="error" class="error" hidden></div>

    <main id="main" hidden>
      <header class="header">
        <p class="header-flag">ğŸ‡§ğŸ‡· PT</p>
        <h1>ğŸ¥Ÿ PASTEL</h1>
        <p class="header-sub">Pastel Brasileiro</p>
        <p class="header-ja">ãƒ‘ã‚¹ãƒ†ãƒ« â€” ãƒ–ãƒ©ã‚¸ãƒ«ã®ä¼çµ±æ–™ç†</p>
      </header>
      <section id="menu-section">
        <h2>ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
        <ul id="menu-list"></ul>
      </section>
      <section id="cart-section">
        <h2>æ³¨æ–‡å†…å®¹ <span id="cart-count">0</span> å“</h2>
        <ul id="cart-list"></ul>
        <p id="cart-total">åˆè¨ˆ: Â¥0</p>
        <button type="button" id="btn-confirm" disabled>ğŸ›’ æ³¨æ–‡ã™ã‚‹</button>
      </section>
      <p class="footer-msg">ã”æ³¨æ–‡å¾Œã€LINEã§é€šçŸ¥ãŒå±Šãã¾ã™ï¼<br>å‡ºæ¥ç«‹ã¦ã‚’ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ ğŸ”¥</p>
    </main>

    <section id="success-section" hidden>
      <h2>æ³¨æ–‡ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸ</h2>
      <p class="order-number">ç•ªå·: <strong id="order-number">-</strong></p>
      <p class="order-msg">ã“ã®ç•ªå·ã‚’ãŠä¼ãˆãã ã•ã„ã€‚æº–å‚™ãŒã§ããŸã‚‰LINEã§ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚</p>
      <p class="footer-msg">å‡ºæ¥ç«‹ã¦ã‚’ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ ğŸ”¥</p>
    </section>
  </div>

  <script src="js/config.js"></script>
  <script src="js/app.js"></script>
  <script>
    (function() {
      var textos = {
        ja: { logo: 'ğŸ¥Ÿ ãƒ‘ã‚¹ãƒ†ãƒ«', btnIdioma: 'ğŸ‡§ğŸ‡· PT', heroTitle: 'ãƒ‘ã‚¹ãƒ†ãƒ«', heroSubtitle: 'ãƒ–ãƒ©ã‚¸ãƒ«ã®ä¼çµ±æ–™ç†', btnPrincipal: 'ğŸ›’ æ³¨æ–‡ã™ã‚‹', btn1: 'ãƒ‘ã‚¹ãƒ†ãƒ«ã¨ã¯ï¼Ÿ', btn2: 'ãŠå¾—ãªã‚»ãƒƒãƒˆ', btn3: 'å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼', btn4: 'ã‚ˆãã‚ã‚‹è³ªå•', footerTexto: 'ã”æ³¨æ–‡å¾Œã€LINEã§é€šçŸ¥ãŒå±Šãã¾ã™ï¼', footerDestaque: 'å‡ºæ¥ç«‹ã¦ã‚’ãŠå¬ã—ä¸ŠãŒã‚Šãã ã•ã„ ğŸ”¥' },
        pt: { logo: 'ğŸ¥Ÿ PASTEL', btnIdioma: 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª', heroTitle: 'PASTEL', heroSubtitle: 'Comida Tradicional Brasileira', btnPrincipal: 'ğŸ›’ FAZER PEDIDO', btn1: 'O que Ã© Pastel?', btn2: 'PromoÃ§Ãµes', btn3: 'Galeria', btn4: 'Perguntas Frequentes', footerTexto: 'ApÃ³s o pedido, vocÃª receberÃ¡ notificaÃ§Ã£o no LINE!', footerDestaque: 'Coma quentinho! ğŸ”¥' }
      };
      var idioma = localStorage.getItem('idioma') || 'ja';
      function atualizar() {
        var t = textos[idioma];
        document.getElementById('logo').textContent = t.logo;
        document.getElementById('btnIdioma').textContent = t.btnIdioma;
        document.getElementById('heroTitle').textContent = t.heroTitle;
        document.getElementById('heroSubtitle').textContent = t.heroSubtitle;
        document.getElementById('btnPrincipal').textContent = t.btnPrincipal;
        document.getElementById('btn1').textContent = t.btn1;
        document.getElementById('btn2').textContent = t.btn2;
        document.getElementById('btn3').textContent = t.btn3;
        document.getElementById('btn4').textContent = t.btn4;
        document.getElementById('footerTexto').innerHTML = t.footerTexto + '<br>';
        document.getElementById('footerDestaque').textContent = t.footerDestaque;
      }
      // Mostrar Ã­cone do carrinho se tiver itens
      function updateCartIcon() {
        var CART_KEY = "foodtruck_cart";
        try {
          var cart = JSON.parse(localStorage.getItem(CART_KEY) || "[]");
          var qty = cart.reduce(function(s, i) { return s + (i.quantidade || 0); }, 0);
          var btnCarrinho = document.getElementById("btnCarrinho");
          var cartCount = document.getElementById("cart-count");

          if (qty > 0) {
            btnCarrinho.style.display = "inline-flex";
            cartCount.textContent = qty;
          } else {
            btnCarrinho.style.display = "none";
          }
        } catch(e) { console.error(e); }
      }

      document.getElementById('btnIdioma').onclick = function() {
        idioma = idioma === 'ja' ? 'pt' : 'ja';
        localStorage.setItem('idioma', idioma);
        atualizar();
      };
      document.getElementById('btnPrincipal').onclick = function() {
        window.location.href = 'cardapio-completo-verde.html';
      };

      atualizar();
      updateCartIcon();
    })();
  </script>
</body>
</html>
